smoke_bundles:
  - keystone_v2_smoke: trusty-icehouse
  - keystone_v2_smoke: trusty-mitaka
  - keystone_v2_smoke: xenial-mitaka
  - keystone_v2_smoke: xenial-newton
  - keystone_v2_smoke: xenial-ocata
  - keystone_v2_smoke: xenial-pike
  - keystone_v3_smoke: xenial-queens
  - keystone_v3_smoke: bionic-queens
  - keystone_v3_smoke: bionic-rocky
  - keystone_v3_smoke: bionic-stein
  - keystone_v3_smoke: bionic-train
  - keystone_v3_smoke: bionic-ussuri
  - keystone_v3_smoke: eoan-train
  - keystone_v3_smoke: focal-ussuri
gate_bundles:
  - keystone_v2_full: trusty-icehouse
  - keystone_v2_full: trusty-mitaka
  - keystone_v2_full: xenial-mitaka
  - keystone_v2_full: xenial-newton
  - keystone_v2_full: xenial-ocata
  - keystone_v2_full: xenial-pike
  - keystone_v3_full: xenial-queens
  - keystone_v3_full: bionic-queens
  - keystone_v3_full: bionic-rocky
  - keystone_v3_full: bionic-stein
  - keystone_v3_full: bionic-train
  - keystone_v3_full: bionic-ussuri
  - keystone_v3_full: eoan-train
  - keystone_v3_full: focal-ussuri
configure:
  - keystone_v2_smoke:
    - zaza.openstack.charm_tests.ceilometer.setup.basic_setup
    - zaza.openstack.charm_tests.glance.setup.add_lts_image
    - zaza.openstack.charm_tests.neutron.setup.basic_overcloud_network
    - zaza.openstack.charm_tests.nova.setup.create_flavors
    - zaza.openstack.charm_tests.nova.setup.manage_ssh_key
    - zaza.openstack.charm_tests.keystone.setup.add_demo_user
    - zaza.openstack.charm_tests.glance.setup.add_cirros_image
    - zaza.openstack.charm_tests.tempest.setup.add_cirros_alt_image
    - zaza.openstack.charm_tests.tempest.setup.add_tempest_flavors
    - zaza.openstack.charm_tests.tempest.setup.add_tempest_roles
    - zaza.openstack.charm_tests.tempest.setup.render_tempest_config_keystone_v2
  - keystone_v3_smoke:
    - zaza.openstack.charm_tests.ceilometer.setup.basic_setup
    - zaza.openstack.charm_tests.glance.setup.add_lts_image
    - zaza.openstack.charm_tests.neutron.setup.basic_overcloud_network
    - zaza.openstack.charm_tests.nova.setup.create_flavors
    - zaza.openstack.charm_tests.nova.setup.manage_ssh_key
    - zaza.openstack.charm_tests.keystone.setup.add_demo_user
    - zaza.openstack.charm_tests.glance.setup.add_cirros_image
    - zaza.openstack.charm_tests.tempest.setup.add_cirros_alt_image
    - zaza.openstack.charm_tests.tempest.setup.add_tempest_flavors
    - zaza.openstack.charm_tests.tempest.setup.add_tempest_roles
    - zaza.openstack.charm_tests.tempest.setup.render_tempest_config_keystone_v3
  - keystone_v2_full:
    - zaza.openstack.charm_tests.ceilometer.setup.basic_setup
    - zaza.openstack.charm_tests.glance.setup.add_lts_image
    - zaza.openstack.charm_tests.neutron.setup.basic_overcloud_network
    - zaza.openstack.charm_tests.nova.setup.create_flavors
    - zaza.openstack.charm_tests.nova.setup.manage_ssh_key
    - zaza.openstack.charm_tests.keystone.setup.add_demo_user
    - zaza.openstack.charm_tests.glance.setup.add_cirros_image
    - zaza.openstack.charm_tests.tempest.setup.add_cirros_alt_image
    - zaza.openstack.charm_tests.tempest.setup.add_tempest_flavors
    - zaza.openstack.charm_tests.tempest.setup.add_tempest_roles
    - zaza.openstack.charm_tests.tempest.setup.render_tempest_config_keystone_v2
  - keystone_v3_full:
    - zaza.openstack.charm_tests.ceilometer.setup.basic_setup
    - zaza.openstack.charm_tests.glance.setup.add_lts_image
    - zaza.openstack.charm_tests.neutron.setup.basic_overcloud_network
    - zaza.openstack.charm_tests.nova.setup.create_flavors
    - zaza.openstack.charm_tests.nova.setup.manage_ssh_key
    - zaza.openstack.charm_tests.keystone.setup.add_demo_user
    - zaza.openstack.charm_tests.glance.setup.add_cirros_image
    - zaza.openstack.charm_tests.tempest.setup.add_cirros_alt_image
    - zaza.openstack.charm_tests.tempest.setup.add_tempest_flavors
    - zaza.openstack.charm_tests.tempest.setup.add_tempest_roles
    - zaza.openstack.charm_tests.tempest.setup.render_tempest_config_keystone_v3
tests:
  - keystone_v2_smoke:
    - zaza.openstack.charm_tests.tempest.tests.TempestTest
  - keystone_v3_smoke:
    - zaza.openstack.charm_tests.tempest.tests.TempestTest
  - keystone_v2_full:
    - zaza.openstack.charm_tests.tempest.tests.TempestTest
  - keystone_v3_full:
    - zaza.openstack.charm_tests.tempest.tests.TempestTest
tests_options:
  tempest:
    keystone_v2_smoke:
      #smoke: True
      whitelist:
         - "tempest.api.compute.servers.test_create_server.ServersTestManualDisk.test_list_servers"
    keystone_v3_smoke:
      #smoke: True
      whitelist:
         - "tempest.api.compute.servers.test_create_server.ServersTestManualDisk.test_list_servers"
    keystone_v2_full:
      whitelist:
         - "tempest.api.compute.servers.test_create_server.ServersTestManualDisk.test_list_servers"
         - "tempest.api.compute.servers.test_create_server.ServersTestManualDisk.test_verify_server_details"
      blacklist:
         - "tempest.api.identity.admin.v3.test_policies.PoliciesTestJSON.test_create_update_delete_policy"
      regex:
         - "tempest.api.network.*"
    keystone_v3_full:
      whitelist:
         - "tempest.api.compute.servers.test_create_server.ServersTestManualDisk.test_list_servers"
         - "tempest.api.compute.servers.test_create_server.ServersTestManualDisk.test_verify_server_details"
      blacklist:
         - "tempest.api.identity.admin.v3.test_policies.PoliciesTestJSON.test_create_update_delete_policy"
      regex:
         - "tempest.api.network.*"
target_deploy_status:
  ceilometer:
    workload-status: blocked
    workload-status-message: "Run the ceilometer-upgrade action on the leader to initialize ceilometer and gnocchi"
  mongodb:
    workload-status: unknown
    workload-status-message: ""
  neutron-api-plugin-ovn:
    workload-status: waiting
    workload-status-message: "'ovsdb-cms' incomplete"
  ovn-central:
    workload-status: blocked
    workload-status-message: "'certificates' missing"
  ovn-chassis:
    workload-status: blocked
    workload-status-message: "'certificates' missing"
  vault:
    workload-status: blocked
    workload-status-message: Vault needs to be initialized
